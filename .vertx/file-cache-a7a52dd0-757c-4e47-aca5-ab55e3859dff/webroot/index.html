<html>
<head>
</head>
<body>

<h1>Politrons Vertx Server</h1>

<div id="addUser">
    <h3>User</h3>
    <input type="hidden" id="inputUserId" type="text"/>

    <p><label id="inputUserNameLabel" type="text">User name<input id="inputUserName" type="text"/></label></p>

    <p><label id="inputUserEmailLabel" type="text">Email<input id="inputUserEmail" type="text"/></label></p>

    <p><label id="inputUserFullnameLabel" type="text">Full name<input id="inputUserFullname" type="text"/></label></p>

    <p><label id="inputUserAgeLabel" type="text">Age<input id="inputUserAge" type="text"/></label></p>

    <p><label id="inputUserLocationLabel" type="text">Location<input id="inputUserLocation" type="text"/></label></p>

    <p><label id="inputUserGenderLabel" type="text">Gender<input id="inputUserGender" type="text"/></label></p>

    <p>
        <input type="button" id="addUserButtonId" value="Add"/>
        <input type="button" id="busAddUserButtonId" value="Add by Bus"/>
        <input type="button" id="busUpdateUserButtonId" value="Update by Bus"/>

    </p>
</div>

<div id="search">
    <h3>Search user</h3>
    <input id="inputSearchBy" type="text"/>
    <select id="searchBy">
        <option value="username">Username</option>
        <option value="email">Email</option>
        <option value="age">Age</option>
    </select>
    <input type="button" id="searchByButton" value="search"/>
    <input type="button" id="busSearchByButton" value="search by bus"/>
</div>

<div id="userList">
    <table>
        <thead>
        <th>
            Name
        </th>
        <th>
            Email
        </th>
        <th>
            Action
        </th>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<p id="demo"></p>

<button onclick="getInitialPosition()">Mark position</button>
<button onclick="getDistance()">Start</button>


</body>
</html>
<script src="js/jquery.min.js"></script>
<script src="//cdn.jsdelivr.net/sockjs/0.3.4/sockjs.min.js"></script>
<script src="js/vertxbus.js"></script>
<script src="js/index.js"></script>




<script>
    var startLat;
    var startLon;
    var x = document.getElementById("demo");

    function getInitialPosition() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }

    function saveInitialPosition(position) {
        startLat = position.coords.latitude;
        startLon = position.coords.latitude;
    }

    function getDistance() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showDistance);
        } else {
            x.innerHTML = "Geolocation is not supported by this browser.";
        }
    }
    function showDistance(position) {
        var currentLat = position.coords.latitude;
        var currentLon = position.coords.latitude;
        x.innerHTML = "Distance: " + calculateDistance(startLat, startLon, currentLat, currentLon);
    }

    function calculateDistance(lat1, lon1, lat2, lon2) {
        var R = 6371; // km
        var dLat = (lat2 - lat1).toRad();
        var dLon = (lon2 - lon1).toRad();
        var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) *
                Math.sin(dLon / 2) * Math.sin(dLon / 2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        var d = R * c;
        return d;
    }
    Number.prototype.toRad = function() {
        return this * Math.PI / 180;
    }
</script>